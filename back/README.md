# –¢—Ä–µ–π–¥–∏–Ω–≥ –ë–æ—Ç –¥–ª—è Bybit

–ó–∞—â–∏—â–µ–Ω–Ω—ã–π —Ç—Ä–µ–π–¥–∏–Ω–≥ –±–æ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π REST API –∏ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ Bybit Exchange.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **Rate Limiting**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (600 –∑–∞–ø—Ä–æ—Å–æ–≤/5 —Å–µ–∫)
- ‚úÖ **WebSocket**: –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ **REST API**: –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–æ—Ä–≥–æ–≤—ã—Ö –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö endpoints
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Helmet, CORS, rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã
- ‚úÖ **TypeScript**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞
- ‚úÖ **Testnet/Mainnet**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ç–∏

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- npm –∏–ª–∏ yarn
- Bybit API –∫–ª—é—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–±–æ—Ä–∫–∞ TypeScript
npm run build

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ
npm start
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# Bybit API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
BYBIT_API_KEY=your_api_key_here
BYBIT_API_SECRET=your_api_secret_here
BYBIT_TESTNET=true

# –°–µ—Ä–≤–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
PORT=3000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Rate Limiting –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
RATE_LIMIT_WINDOW_MS=900000          # 15 –º–∏–Ω—É—Ç
RATE_LIMIT_MAX_REQUESTS=100          # 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 15 –º–∏–Ω—É—Ç
TRADING_RATE_LIMIT_WINDOW_MS=60000   # 1 –º–∏–Ω—É—Ç–∞
TRADING_RATE_LIMIT_MAX_REQUESTS=10   # 10 —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –º–∏–Ω—É—Ç—É

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=info
NODE_ENV=development
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Bybit](https://www.bybit.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏:
   - `Contract - Orders & Positions` (–¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏)
   - `Spot & Margin Trading` (–¥–ª—è —Å–ø–æ—Ç —Ç–æ—Ä–≥–æ–≤–ª–∏)
4. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [Testnet](https://testnet.bybit.com)

## üåê API Endpoints

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ endpoints (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
GET /health

# –ü–æ–ª—É—á–µ–Ω–∏–µ OHLCV –¥–∞–Ω–Ω—ã—Ö
GET /api/ohlcv/BTCUSDT?timeframe=1h&limit=100

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ä–∞
GET /api/ticker/BTCUSDT

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ –æ—Ä–¥–µ—Ä–æ–≤
GET /api/orderbook/BTCUSDT?limit=25

# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤
GET /api/markets

# –°—Ç–∞—Ç—É—Å WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
GET /api/websocket/status

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ rate limiter
GET /api/stats/rate-limiter
```

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints (—Ç—Ä–µ–±—É—é—Ç API –∫–ª—é—á–∏)

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
GET /api/balance

# –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
GET /api/positions

# –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
GET /api/orders?symbol=BTCUSDT
```

### –¢–æ—Ä–≥–æ–≤—ã–µ endpoints (—Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º rate limiting)

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞
POST /api/order
Content-Type: application/json
{
  "symbol": "BTCUSDT",
  "side": "buy",
  "amount": 0.001,
  "price": 45000,
  "type": "limit"
}

# –û—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–∞
DELETE /api/order/ORDER_ID
Content-Type: application/json
{
  "symbol": "BTCUSDT"
}
```

## üì° WebSocket –ü–æ–¥–ø–∏—Å–∫–∏

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ WebSocket –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏:

- **–¢–∏–∫–µ—Ä—ã**: –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Ü–µ–Ω –∏ –æ–±—ä–µ–º–æ–≤
- **–ö–Ω–∏–≥–∞ –æ—Ä–¥–µ—Ä–æ–≤**: –û–±–Ω–æ–≤–ª–µ–Ω–∏—è bid/ask
- **–°–¥–µ–ª–∫–∏**: –ò—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏
- **–ü–æ–∑–∏—Ü–∏–∏**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–Ω–∞–ª)
- **–û—Ä–¥–µ—Ä–∞**: –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤ (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–Ω–∞–ª)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Rate Limiting

- **API Requests**: 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 15 –º–∏–Ω—É—Ç –Ω–∞ IP
- **Trading Operations**: 10 —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –º–∏–Ω—É—Ç—É
- **Bybit API**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ (600 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 5 —Å–µ–∫—É–Ω–¥)

### –ó–∞—â–∏—Ç–∞

- **Helmet**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- **CORS**: –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ —Å —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- **Input Validation**: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **Error Handling**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check

```bash
curl http://localhost:3000/health
```

–û—Ç–≤–µ—Ç:
```json
{
  "status": "ok",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "websocket": {
    "public": true,
    "private": true
  },
  "rateLimiter": {
    "requests": 45,
    "maxRequests": 500
  },
  "testnet": true
}
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏

–ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –æ:
- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è—Ö
- Rate limiting —Å—Ç–∞—Ç—É—Å–µ
- API –∑–∞–ø—Ä–æ—Å–∞—Ö –∏ –æ—Ç–≤–µ—Ç–∞—Ö
- –û—à–∏–±–∫–∞—Ö –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è—Ö

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint (testnet/mainnet)

2. **API –∫–ª—é—á–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª—é—á–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ—Ç–∏ (testnet/mainnet)

3. **Rate limit –æ—à–∏–±–∫–∏**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ rate limiting –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```javascript
// –ü—Ä–∏–º–µ—Ä —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
const tradeSignal = {
  symbol: 'BTCUSDT',
  side: 'buy',
  amount: 0.001,
  price: 45000,
  type: 'limit'
};

// –û—Ç–ø—Ä–∞–≤–∫–∞ POST –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–∞
fetch('http://localhost:3000/api/order', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(tradeSignal)
});
```

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
back/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bybit.ts              # –û—Å–Ω–æ–≤–Ω–æ–π API –∫–ª–∞—Å—Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bybit-websocket.ts    # WebSocket –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rate-limiter.ts       # Rate limiting
‚îÇ   ‚îú‚îÄ‚îÄ config.ts                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ server.ts                 # Express —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

### –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
npm run dev

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
npm start

# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint
```

## ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

- **–í–°–ï–ì–î–ê** —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ testnet –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∞ mainnet
- **–ù–ï** –∫–æ–º–º–∏—Ç—å—Ç–µ API –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- **–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï** –º–∞–ª–µ–Ω—å–∫–∏–µ —Å—É–º–º—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–°–õ–ï–î–ò–¢–ï** –∑–∞ –ª–∏–º–∏—Ç–∞–º–∏ API –∏ –∫–æ–º–∏—Å—Å–∏—è–º–∏
- **–ò–ú–ï–ô–¢–ï** –ø–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 